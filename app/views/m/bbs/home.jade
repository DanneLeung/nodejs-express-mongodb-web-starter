extends ../layouts/bbs
block css
  style.
    .topic {padding: 0  0.5rem;max-height:10rem;overflow:hidden;text-overflow:ellipsis;}
  
block headNav
  header#haedNav.heading.affix.dock-top.dock-auto
    nav#headNav.nav
      a.brand-name(href='home', class="#{!node?'active':''}", data-page-name='index')
        //- i.icon-home
        | 全部
      each n in nodes
        a(href='home/#{n._id}', class="#{n._id == node?'active':''}" data-page-name='#{n.title}')=n.title
    .title
    nav.nav
      a(href='user')
        .avatar.circle
          img#headimgurl(src="#{user && user.headimgurl ? user.headimgurl : baseUrl + '/imgs/headimg_default.jpg'}", alt='U')

block content
  //- .heading
    .title 

  #topTopics.list.space-sm
    each topTopic in topTopics
      if(topTopic)
        .item.with-avatar(data-id="#{topTopic._id}")
          .avatar.avatar-sm.circle.yellow 顶
          .content
            | #{topTopic.content}
  #topics

  nav.nav.justified.pager
    a#pagermore.loading.loading-light(href='topics/#{node}')
      strong 加载更多 ...
      span.text-link
        i.icon.icon-double-angle-down
  nav.fab.affix.dock-bottom.dock-right.shadow-none
    a.btn.circle.shadow-2.has-margin-sm.btn-lg.primary(title='发布新帖',href="topic/new/#{node}")
      i.icon.icon-plus
block contentScripts
  script(src="home.js?v=#{v_js}")


