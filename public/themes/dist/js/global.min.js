function is_weixin(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)}function getQueryString(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=decodeURI(window.location.search).substr(1).match(n);return null!=t?unescape(t[2]):null}function removeQueryString(e,n){if(n&&e&&e.indexOf("?")>=0){var t=e.substr(0,e.indexOf("?")),o=e.substr(e.indexOf("?")+1);if(console.log("s: %s, q: %s",t,o),o){var i=o.split("&");if(console.log("array ",i),i){for(var r="",a=0;a<i.length;a++){var s=i[a];s=s.indexOf("=")>=0?s.substr(0,s.indexOf("=")):s,inarray(s,n)||(r+="&"+i[a])}r.length>0?(t+="?"+(0==r.indexOf("&")?r.substr(1):r),t+="&_"+Date.now()):t+="?_"+Date.now(),e=t}}}return e}function inarray(e,n){if(n&&n.length>0)for(var t=0;t<n.length;t++)if(e==n[t])return!0;return!1}function getLocationURL(){return location.href.split("#")[0]}function getLocation(e){var n=sessionStorage.geolocation;if(n)return void e(n.split(","));if(getQueryString("lat")&&getQueryString("lng")){var t=getQueryString("lat"),o=getQueryString("lng"),n=[o,t];return sessionStorage.setItem("geolocation",n),void e(n)}is_weixn()?W.location(function(n,t){var o=[t,n];sessionStorage.setItem("geolocation",o),e(o)}):navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var o=t.coords.latitude,i=t.coords.longitude;console.log("经纬度"+(i+","+o)),n=[i,o],sessionStorage.geolocation=n,e(n)},function(t){sessionStorage.geolocation=n,e(n)}):alert("浏览器不支持定位功能!")}function _getCityName(){if(window.localStorage)return localStorage.cityName?localStorage.cityName:null}function _getCityId(){if(window.localStorage)return localStorage.cityId?localStorage.cityId:null}function showShare(){$("#brand-detail-guide").toggleClass("hide"),$("#brand-detail-guide").bind("click",function(){$("#brand-detail-guide").addClass("hide")},!1)}function closeShare(){$("#brand-detail-guide").addClass("hide")}function _getUserId(){return window.sessionStorage&&sessionStorage["user.openid"]?sessionStorage["user.openid"]:null}function blank(e){return null==e?"":e}var getStrSize=function(e){for(var n=0,t=e.length,o=-1,i=0;i<t;i++)o=e.charCodeAt(i),n+=o>=0&&o<=128?1:2;return n};